import{ref as e,watch as t,computed as a,resolveComponent as l,openBlock as n,createElementBlock as o,Fragment as i,createVNode as d,normalizeProps as r,guardReactiveProps as u,createCommentVNode as s,createBlock as c,mergeProps as f,resolveDirective as m,withCtx as v,createElementVNode as p,withDirectives as _,withModifiers as h,createTextVNode as y,toDisplayString as b,unref as w,isRef as g}from"vue";import{useApi as k}from"@directus/extensions-sdk";const C={"camera-controls":!0,"auto-rotate":!0,"shadow-intensity":1};function S(e,t={}){const a={...C,...t,src:e};return Object.fromEntries(Object.entries(a).filter((([e,t])=>!!t)))}var x=[],I=[];function j(e,t){if(e&&"undefined"!=typeof document){var a,l=!0===t.prepend?"prepend":"append",n=!0===t.singleTag,o="string"==typeof t.container?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(n){var i=x.indexOf(o);-1===i&&(i=x.push(o)-1,I[i]={}),a=I[i]&&I[i][l]?I[i][l]:I[i][l]=d()}else a=d();65279===e.charCodeAt(0)&&(e=e.substring(1)),a.styleSheet?a.styleSheet.cssText+=e:a.appendChild(document.createTextNode(e))}function d(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),t.attributes)for(var a=Object.keys(t.attributes),n=0;n<a.length;n++)e.setAttribute(a[n],t.attributes[a[n]]);var i="prepend"===l?"afterbegin":"beforeend";return o.insertAdjacentElement(i,e),e}}j("\n.model-container[data-v-ec41c55a] {\n  width: 100%;\n  padding-bottom: 100%;\n  position: relative;\n}\n.model-container > model-viewer[data-v-ec41c55a] {\n\tposition: absolute;\n\ttop: 0; left: 0;\n\twidth: 100%;\n\theight: 100%;\n}\n.v-form[data-v-ec41c55a] {\n\tpadding-top: var(--content-padding);\n}\n.v-divider[data-v-ec41c55a] {\n\tcursor: pointer;\n}\n.v-divider .expand-icon[data-v-ec41c55a] {\n\tfloat: right;\n\ttransform: rotate(90deg) !important;\n\ttransition: transform var(--fast) var(--transition);\n}\n.v-divider.active .expand-icon[data-v-ec41c55a] {\n\ttransform: rotate(0) !important;\n}\n.v-divider[data-v-ec41c55a] .type-text {\n\tposition: relative;\n}\n.header-icon[data-v-ec41c55a] {\n\tmargin-right: 12px !important;\n}\n",{});var O=(e,t)=>{const a=e.__vccOpts||e;for(const[e,l]of t)a[e]=l;return a};const $={props:{value:{type:Object,default:null},group_label:{type:String,default:"3D Model Options"},camera_controls:{type:Boolean,default:!0},auto_rotate:{type:Boolean,default:!0},shadow_intensity:{type:Number,default:1},scale:{type:String,default:"1 1 1"},folder:{type:String},custom:{type:Object,default:{}}},emits:["input"],setup(l,{emit:n}){const o=e(l.value?.file_id??null),i=e(l.value?.camera_controls??l.camera_controls),d=e(l.value?.auto_rotate??l.auto_rotate),r=e(l.value?.shadow_intensity??l.shadow_intensity),u=e(l.value?.scale??l.scale);t((()=>l.value),(e=>{"file_id"in e&&(o.value=e.file_id),"camera_controls"in e&&(i.value=e.camera_controls),"auto_rotate"in e&&(d.value=e.auto_rotate),"shadow_intensity"in e&&(r.value=e.shadow_intensity),"scale"in e&&(u.value=e.scale)}));const s=a((()=>S(`/assets/${o.value}`,{"camera-controls":i.value,"auto-rotate":d.value,"shadow-intensity":r.value,scale:u.value,...l.custom??{}}))),c=a((()=>o.value?"closed":"open"));return{viewerAttrs:s,fileId:o,settingsOpen:c,handleChange:function(e){n("input",{...l.value,...e})}}}},A={key:0,class:"model-container"};var R={id:"3d-model-interface",name:"3D Model Viewer",icon:"box",description:"3D Model Viewer Interface",component:O($,[["render",function(e,t,a,c,f,m){const v=l("model-viewer"),p=l("v-form");return n(),o(i,null,[c.fileId?(n(),o("div",A,[d(v,r(u(c.viewerAttrs)),null,16)])):s("v-if",!0),d(p,{"model-value":a.value,fields:[{field:"file_id",name:"Model File",meta:{interface:"fake-file",options:{folder:a.folder},group:"advanced"}},{field:"camera_controls",name:"Camera Controls",meta:{interface:"boolean",options:{label:"$t:enable_select_button"},width:"half",group:"advanced"}},{field:"auto_rotate",name:"Auto Rotate",meta:{interface:"boolean",options:{label:"$t:enable_select_button"},width:"half",group:"advanced"}},{field:"shadow_intensity",name:"Shadow Intensity",type:"integer",schema:{default_value:1},meta:{interface:"input",width:"half",group:"advanced"}},{field:"scale",name:"Scale",type:"string",schema:{default_value:"1 1 1"},meta:{interface:"input",width:"half",group:"advanced"}},{field:"advanced",type:"alias",name:a.group_label,schema:null,meta:{field:"advanced",special:["alias","no-data","group"],interface:"group-detail",options:{start:c.settingsOpen}}}],"onUpdate:modelValue":t[0]||(t[0]=e=>c.handleChange(e))},null,8,["model-value","fields"])],64)}],["__scopeId","data-v-ec41c55a"],["__file","interface.vue"]]),options:[{field:"group_label",name:"Settings Label",schema:{default_value:"3D Model Options"},meta:{interface:"input"}},{field:"camera_controls",name:"Camera Controls",schema:{default_value:!0},meta:{interface:"boolean",options:{label:"$t:enable_select_button"},width:"half"}},{field:"auto_rotate",name:"Auto Rotate",schema:{default_value:!0},meta:{interface:"boolean",options:{label:"$t:enable_select_button"},width:"half"}},{field:"shadow_intensity",name:"Shadow Intensity",type:"integer",schema:{default_value:1},meta:{interface:"input",width:"half"}},{field:"scale",name:"Scale",type:"string",schema:{default_value:"1 1 1"},meta:{interface:"input",width:"half"}},{field:"folder",name:"$t:interfaces.system-folder.folder",type:"uuid",meta:{width:"half",interface:"system-folder",note:"$t:interfaces.system-folder.field_hint"}},{field:"custom",name:"Custom Properties",type:"json",schema:{default_value:"{}"},meta:{interface:"input-code"}}],types:["json"],group:"relational",recommendedDisplays:["3d-model-display"]};j("\n.model-container[data-v-4497bd4f] {\n  width: 100%;\n  padding-bottom: 100%;\n  position: relative;\n}\n.model-container > model-viewer[data-v-4497bd4f] {\n\tposition: absolute;\n\ttop: 0; left: 0;\n\twidth: 100%;\n\theight: 100%;\n}\n",{});const U={props:{value:{type:Object,default:null},camera_controls:{type:Boolean,default:!0},auto_rotate:{type:Boolean,default:!0},shadow_intensity:{type:Number,default:1},scale:{type:String,default:"2 2 2"},custom:{type:Object,default:{}}},setup:e=>({viewerAttrs:S(`/assets/${e.value?.file_id}`,{"camera-controls":e.value?.camera_controls??e.camera_controls,"auto-rotate":e.value?.auto_rotate??e.auto_rotate,"shadow-intensity":e.value?.shadow_intensity??e.shadow_intensity,scale:e.value?.scale??e.scale,...e.custom??{}})})},V={class:"model-container"};var D={id:"3d-model-display",name:"3D Model Viewer",icon:"box",description:"3D Model Viewer Display",component:O(U,[["render",function(e,t,a,i,d,u){const m=l("model-viewer");return n(),o("div",V,[a.value?.file_id?(n(),c(m,r(f({key:0},i.viewerAttrs)),null,16)):s("v-if",!0)])}],["__scopeId","data-v-4497bd4f"],["__file","display.vue"]]),options:[{field:"camera_controls",name:"Camera Controls",schema:{default_value:!0},meta:{interface:"boolean",options:{label:"$t:enable_select_button"},width:"half"}},{field:"auto_rotate",name:"Auto Rotate",schema:{default_value:!0},meta:{interface:"boolean",options:{label:"$t:enable_select_button"},width:"half"}},{field:"shadow_intensity",name:"Shadow Intensity",type:"integer",schema:{default_value:1},meta:{interface:"input",width:"half"}},{field:"scale",name:"Scale",type:"string",schema:{default_value:"2 2 2"},meta:{interface:"input",width:"half"}},{field:"custom",name:"Custom Properties",type:"json",schema:{default_value:"{}"},meta:{interface:"input-code"}}],types:["json"]};j("\n.model-container[data-v-10fd580c] {\n  width: 100%;\n  padding-bottom: 100%;\n  position: relative;\n}\n.model-container > model-viewer[data-v-10fd580c] {\n\tposition: absolute;\n\ttop: 0; left: 0;\n\twidth: 100%;\n\theight: 100%;\n}\n",{});const M={props:{file_id:{type:String,default:null},camera_controls:{type:Boolean,default:!0},auto_rotate:{type:Boolean,default:!0},shadow_intensity:{type:Number,default:1},scale:{type:String,default:"1 1 1"},custom:{type:Object,default:{}}},setup:e=>({viewerAttrs:S(`/assets/${e.file_id}`,{"camera-controls":e.camera_controls,"auto-rotate":e.auto_rotate,"shadow-intensity":e.shadow_intensity,scale:e.scale,...e.custom??{}})})},B={key:0,class:"model-container"};var L={id:"3d-model-panel",name:"3D Model Viewer",icon:"box",description:"3D Model Viewer Panel",component:O(M,[["render",function(e,t,a,i,c,f){const m=l("model-viewer");return a.file_id?(n(),o("div",B,[d(m,r(u(i.viewerAttrs)),null,16)])):s("v-if",!0)}],["__scopeId","data-v-10fd580c"],["__file","panel.vue"]]),options:[{field:"file_id",name:"Model File",meta:{interface:"fake-file"}},{field:"camera_controls",name:"Camera Controls",schema:{default_value:!0},meta:{interface:"boolean",options:{label:"$t:enable_select_button"},width:"half"}},{field:"auto_rotate",name:"Auto Rotate",schema:{default_value:!0},meta:{interface:"boolean",options:{label:"$t:enable_select_button"},width:"half"}},{field:"shadow_intensity",name:"Shadow Intensity",type:"integer",schema:{default_value:1},meta:{interface:"input",width:"half"}},{field:"scale",name:"Scale",type:"string",schema:{default_value:"1 1 1"},meta:{interface:"input",width:"half"}},{field:"custom",name:"Custom Properties",type:"json",schema:{default_value:"{}"},meta:{interface:"input-code"}}],minWidth:8,minHeight:8};j("\n.extension[data-v-8018fc4f] {\n\tcolor: var(--primary);\n\tfont-weight: 600;\n\tfont-size: 11px;\n\ttext-transform: uppercase;\n}\n.deselect[data-v-8018fc4f]:hover {\n\t--v-icon-color: var(--danger);\n}\n",{});const E={class:"file"};const F=[R,{id:"fake-file",name:"Fake File",description:"Select or upload a file",icon:"note_add",component:O({__name:"interface",props:{value:Object,disabled:{type:Boolean,required:!1},folder:{type:String,required:!1}},emits:["input"],setup(r,{emit:u}){const f=k(),C=u,S=r,x=e(null),I=e(null);t((()=>S.value),R),R(S.value);const{url:j,isValidURL:O,loading:$,importFromURL:A}=function(){const t=e(""),l=e(!1),n=a((()=>{try{return new URL(t.value),!0}catch{return!1}}));return{url:t,loading:l,isValidURL:n,importFromURL:async function(){l.value=!0;try{const e=await f.post("/files/import",{url:t.value,data:{folder:S.folder}});x.value=e.data.data,I.value=null,t.value="",V(x.value?.id)}catch(e){}finally{l.value=!1}}}}();function R(e){e&&U(e).then((e=>{x.value=e}))}async function U(e){if(!e)return null;return(await f.get("/files/"+e,{params:{fields:["id","title","type","filename_download"]}})).data.data}async function V(e){C("input",e),e!==x.value?.id&&(x.value=await U(e))}function D(e){e[0]&&V(e[0])}function M(e){x.value=e,I.value=null,V(e.id)}return(e,t)=>{const a=l("v-skeleton-loader"),u=l("v-icon"),f=l("v-input"),k=l("v-list-item-icon"),C=l("v-list-item-content"),S=l("v-list-item"),R=l("v-divider"),U=l("v-list"),B=l("v-menu"),L=l("v-card-title"),F=l("v-upload"),N=l("v-card-text"),P=l("v-button"),T=l("v-card-actions"),q=l("v-card"),z=l("v-dialog"),H=l("drawer-files"),W=m("tooltip");return n(),o("div",E,[d(B,{attached:"",disabled:e.loading},{activator:v((({toggle:l,active:d})=>[p("div",null,[e.loading?(n(),c(a,{key:0,type:"input"})):(n(),c(f,{key:1,clickable:"",readonly:"",active:d,disabled:r.disabled,placeholder:"No file selected","model-value":x.value&&x.value.title,onClick:l},{append:v((()=>[x.value?(n(),o(i,{key:0},[r.disabled?s("v-if",!0):_((n(),c(u,{key:0,class:"deselect",name:"close",onClick:t[0]||(t[0]=h((e=>V(null)),["stop"]))},null,512)),[[W,"Deselect"]])],64)):(n(),c(u,{key:1,name:"attach_file"}))])),_:2},1032,["active","disabled","model-value","onClick"]))])])),default:v((()=>[d(U,null,{default:v((()=>[x.value?(n(),o(i,{key:0},[d(S,{clickable:"",download:x.value.filename_download},{default:v((()=>[d(k,null,{default:v((()=>[d(u,{name:"get_app"})])),_:1}),d(C,null,{default:v((()=>[y("Download file")])),_:1})])),_:1},8,["download"]),r.disabled?s("v-if",!0):(n(),c(R,{key:0}))],64)):s("v-if",!0),r.disabled?s("v-if",!0):(n(),o(i,{key:1},[d(S,{clickable:"",onClick:t[1]||(t[1]=e=>I.value="upload")},{default:v((()=>[d(k,null,{default:v((()=>[d(u,{name:"phonelink"})])),_:1}),d(C,null,{default:v((()=>[y(b(x.value?"Replace from device":"Upload from device"),1)])),_:1})])),_:1}),d(S,{clickable:"",onClick:t[2]||(t[2]=e=>I.value="choose")},{default:v((()=>[d(k,null,{default:v((()=>[d(u,{name:"folder_open"})])),_:1}),d(C,null,{default:v((()=>[y(b(x.value?"Replace from library":"Choose from library"),1)])),_:1})])),_:1}),d(S,{clickable:"",onClick:t[3]||(t[3]=e=>I.value="url")},{default:v((()=>[d(k,null,{default:v((()=>[d(u,{name:"link"})])),_:1}),d(C,null,{default:v((()=>[y(b(x.value?"Replace from url":"Import from url"),1)])),_:1})])),_:1})],64))])),_:1})])),_:1},8,["disabled"]),d(z,{"model-value":"upload"===I.value,onEsc:t[5]||(t[5]=e=>I.value=null),"onUpdate:modelValue":t[6]||(t[6]=e=>I.value=null)},{default:v((()=>[d(q,null,{default:v((()=>[d(L,null,{default:v((()=>[y(b("Upload from device"))])),_:1}),d(N,null,{default:v((()=>[d(F,{"from-url":"",folder:r.folder,onInput:M},null,8,["folder"])])),_:1}),d(T,null,{default:v((()=>[d(P,{secondary:"",onClick:t[4]||(t[4]=e=>I.value=null)},{default:v((()=>[y(b("Cancel"))])),_:1})])),_:1})])),_:1})])),_:1},8,["model-value"]),"choose"===I.value?(n(),c(H,{key:0,folder:r.folder,active:"choose"===I.value,"onUpdate:active":t[7]||(t[7]=e=>I.value=null),onInput:D},null,8,["folder","active"])):s("v-if",!0),d(z,{"model-value":"url"===I.value,persistent:w($),"onUpdate:modelValue":t[10]||(t[10]=e=>I.value=null),onEsc:t[11]||(t[11]=e=>I.value=null)},{default:v((()=>[d(q,null,{default:v((()=>[d(L,null,{default:v((()=>[y(b("Import from URL"))])),_:1}),d(N,null,{default:v((()=>[d(f,{modelValue:w(j),"onUpdate:modelValue":t[8]||(t[8]=e=>g(j)?j.value=e:null),autofocus:"",placeholder:"URL",nullable:!1,disabled:w($)},null,8,["modelValue","disabled"])])),_:1}),d(T,null,{default:v((()=>[d(P,{disabled:w($),secondary:"",onClick:t[9]||(t[9]=e=>I.value=null)},{default:v((()=>[y(b("Cancel"))])),_:1},8,["disabled"]),d(P,{loading:w($),disabled:!1===w(O),onClick:w(A)},{default:v((()=>[y(b("Import label"))])),_:1},8,["loading","disabled","onClick"])])),_:1})])),_:1})])),_:1},8,["model-value","persistent"])])}}},[["__scopeId","data-v-8018fc4f"],["__file","interface.vue"]]),types:["uuid"],options:[{field:"folder",name:"$t:interfaces.system-folder.folder",type:"uuid",meta:{width:"full",interface:"system-folder",note:"$t:interfaces.system-folder.field_hint"}}]}],N=[D],P=[],T=[],q=[L],z=[],H=[];export{N as displays,F as interfaces,P as layouts,T as modules,H as operations,q as panels,z as themes};
