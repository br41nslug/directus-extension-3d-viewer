import{useApi as e}from"@directus/extensions-sdk";import{ref as t,watch as a,computed as l,resolveComponent as n,openBlock as o,createElementBlock as i,Fragment as d,createVNode as r,normalizeProps as u,guardReactiveProps as s,createCommentVNode as c,createBlock as f,mergeProps as m,resolveDirective as p,withCtx as v,createElementVNode as _,withDirectives as h,withModifiers as y,createTextVNode as b,toDisplayString as w,unref as g,isRef as k}from"vue";const C={"camera-controls":!0,"auto-rotate":!0,"shadow-intensity":1};function S(e,t={}){const a={...C,...t,src:e};return Object.fromEntries(Object.entries(a).filter((([e,t])=>!!t)))}function $(e){return e.defaults.headers.common.Authorization?.split(" ")[1]||null}var x=[],I=[];function j(e,t){if(e&&"undefined"!=typeof document){var a,l=!0===t.prepend?"prepend":"append",n=!0===t.singleTag,o="string"==typeof t.container?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(n){var i=x.indexOf(o);-1===i&&(i=x.push(o)-1,I[i]={}),a=I[i]&&I[i][l]?I[i][l]:I[i][l]=d()}else a=d();65279===e.charCodeAt(0)&&(e=e.substring(1)),a.styleSheet?a.styleSheet.cssText+=e:a.appendChild(document.createTextNode(e))}function d(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),t.attributes)for(var a=Object.keys(t.attributes),n=0;n<a.length;n++)e.setAttribute(a[n],t.attributes[a[n]]);var i="prepend"===l?"afterbegin":"beforeend";return o.insertAdjacentElement(i,e),e}}j("\n.model-container[data-v-97e11c2e] {\n  width: 100%;\n  padding-bottom: 100%;\n  position: relative;\n}\n.model-container > model-viewer[data-v-97e11c2e] {\n\tposition: absolute;\n\ttop: 0; left: 0;\n\twidth: 100%;\n\theight: 100%;\n}\n.v-form[data-v-97e11c2e] {\n\tpadding-top: var(--content-padding);\n}\n.v-divider[data-v-97e11c2e] {\n\tcursor: pointer;\n}\n.v-divider .expand-icon[data-v-97e11c2e] {\n\tfloat: right;\n\ttransform: rotate(90deg) !important;\n\ttransition: transform var(--fast) var(--transition);\n}\n.v-divider.active .expand-icon[data-v-97e11c2e] {\n\ttransform: rotate(0) !important;\n}\n.v-divider[data-v-97e11c2e] .type-text {\n\tposition: relative;\n}\n.header-icon[data-v-97e11c2e] {\n\tmargin-right: 12px !important;\n}\n",{});var A=(e,t)=>{const a=e.__vccOpts||e;for(const[e,l]of t)a[e]=l;return a};const O={props:{value:{type:Object,default:null},group_label:{type:String,default:"3D Model Options"},camera_controls:{type:Boolean,default:!0},auto_rotate:{type:Boolean,default:!0},shadow_intensity:{type:Number,default:1},scale:{type:String,default:"1 1 1"},folder:{type:String},custom:{type:Object,default:{}}},emits:["input"],setup(n,{emit:o}){const i=t(n.value?.file_id??null),d=t(n.value?.camera_controls??n.camera_controls),r=t(n.value?.auto_rotate??n.auto_rotate),u=t(n.value?.shadow_intensity??n.shadow_intensity),s=t(n.value?.scale??n.scale);a((()=>n.value),(e=>{"file_id"in e&&(i.value=e.file_id),"camera_controls"in e&&(d.value=e.camera_controls),"auto_rotate"in e&&(r.value=e.auto_rotate),"shadow_intensity"in e&&(u.value=e.shadow_intensity),"scale"in e&&(s.value=e.scale)}));const c=l((()=>S(`/assets/${i.value}?access_token=${$(e())}`,{"camera-controls":d.value,"auto-rotate":r.value,"shadow-intensity":u.value,scale:s.value,...n.custom??{}}))),f=l((()=>i.value?"closed":"open"));return{viewerAttrs:c,fileId:i,settingsOpen:f,handleChange:function(e){o("input",{...n.value,...e})}}}},R={key:0,class:"model-container"};var U={id:"3d-model-interface",name:"3D Model Viewer",icon:"box",description:"3D Model Viewer Interface",component:A(O,[["render",function(e,t,a,l,f,m){const p=n("model-viewer"),v=n("v-form");return o(),i(d,null,[l.fileId?(o(),i("div",R,[r(p,u(s(l.viewerAttrs)),null,16)])):c("v-if",!0),r(v,{"model-value":a.value,fields:[{field:"file_id",name:"Model File",meta:{interface:"fake-file",options:{folder:a.folder},group:"advanced"}},{field:"camera_controls",name:"Camera Controls",meta:{interface:"boolean",options:{label:"$t:enable_select_button"},width:"half",group:"advanced"}},{field:"auto_rotate",name:"Auto Rotate",meta:{interface:"boolean",options:{label:"$t:enable_select_button"},width:"half",group:"advanced"}},{field:"shadow_intensity",name:"Shadow Intensity",type:"integer",schema:{default_value:1},meta:{interface:"input",width:"half",group:"advanced"}},{field:"scale",name:"Scale",type:"string",schema:{default_value:"1 1 1"},meta:{interface:"input",width:"half",group:"advanced"}},{field:"advanced",type:"alias",name:a.group_label,schema:null,meta:{field:"advanced",special:["alias","no-data","group"],interface:"group-detail",options:{start:l.settingsOpen}}}],"onUpdate:modelValue":t[0]||(t[0]=e=>l.handleChange(e))},null,8,["model-value","fields"])],64)}],["__scopeId","data-v-97e11c2e"],["__file","interface.vue"]]),options:[{field:"group_label",name:"Settings Label",schema:{default_value:"3D Model Options"},meta:{interface:"input"}},{field:"camera_controls",name:"Camera Controls",schema:{default_value:!0},meta:{interface:"boolean",options:{label:"$t:enable_select_button"},width:"half"}},{field:"auto_rotate",name:"Auto Rotate",schema:{default_value:!0},meta:{interface:"boolean",options:{label:"$t:enable_select_button"},width:"half"}},{field:"shadow_intensity",name:"Shadow Intensity",type:"integer",schema:{default_value:1},meta:{interface:"input",width:"half"}},{field:"scale",name:"Scale",type:"string",schema:{default_value:"1 1 1"},meta:{interface:"input",width:"half"}},{field:"folder",name:"$t:interfaces.system-folder.folder",type:"uuid",meta:{width:"half",interface:"system-folder",note:"$t:interfaces.system-folder.field_hint"}},{field:"custom",name:"Custom Properties",type:"json",schema:{default_value:"{}"},meta:{interface:"input-code"}}],types:["json"],group:"relational",recommendedDisplays:["3d-model-display"]};j("\n.model-container[data-v-cc1666d4] {\n  width: 100%;\n  padding-bottom: 100%;\n  position: relative;\n}\n.model-container > model-viewer[data-v-cc1666d4] {\n\tposition: absolute;\n\ttop: 0; left: 0;\n\twidth: 100%;\n\theight: 100%;\n}\n",{});const V={props:{value:{type:Object,default:null},camera_controls:{type:Boolean,default:!0},auto_rotate:{type:Boolean,default:!0},shadow_intensity:{type:Number,default:1},scale:{type:String,default:"2 2 2"},custom:{type:Object,default:{}}},setup:t=>({viewerAttrs:S(`/assets/${t.value?.file_id}?access_token=${$(e())}`,{"camera-controls":t.value?.camera_controls??t.camera_controls,"auto-rotate":t.value?.auto_rotate??t.auto_rotate,"shadow-intensity":t.value?.shadow_intensity??t.shadow_intensity,scale:t.value?.scale??t.scale,...t.custom??{}})})},D={class:"model-container"};var M={id:"3d-model-display",name:"3D Model Viewer",icon:"box",description:"3D Model Viewer Display",component:A(V,[["render",function(e,t,a,l,d,r){const s=n("model-viewer");return o(),i("div",D,[a.value?.file_id?(o(),f(s,u(m({key:0},l.viewerAttrs)),null,16)):c("v-if",!0)])}],["__scopeId","data-v-cc1666d4"],["__file","display.vue"]]),options:[{field:"camera_controls",name:"Camera Controls",schema:{default_value:!0},meta:{interface:"boolean",options:{label:"$t:enable_select_button"},width:"half"}},{field:"auto_rotate",name:"Auto Rotate",schema:{default_value:!0},meta:{interface:"boolean",options:{label:"$t:enable_select_button"},width:"half"}},{field:"shadow_intensity",name:"Shadow Intensity",type:"integer",schema:{default_value:1},meta:{interface:"input",width:"half"}},{field:"scale",name:"Scale",type:"string",schema:{default_value:"2 2 2"},meta:{interface:"input",width:"half"}},{field:"custom",name:"Custom Properties",type:"json",schema:{default_value:"{}"},meta:{interface:"input-code"}}],types:["json"]};j("\n.model-container[data-v-6a1c950e] {\n  width: 100%;\n  padding-bottom: 100%;\n  position: relative;\n}\n.model-container > model-viewer[data-v-6a1c950e] {\n\tposition: absolute;\n\ttop: 0; left: 0;\n\twidth: 100%;\n\theight: 100%;\n}\n",{});const B={props:{file_id:{type:String,default:null},camera_controls:{type:Boolean,default:!0},auto_rotate:{type:Boolean,default:!0},shadow_intensity:{type:Number,default:1},scale:{type:String,default:"1 1 1"},custom:{type:Object,default:{}}},setup:t=>({viewerAttrs:S(`/assets/${t.file_id}?access_token=${$(e())}`,{"camera-controls":t.camera_controls,"auto-rotate":t.auto_rotate,"shadow-intensity":t.shadow_intensity,scale:t.scale,...t.custom??{}})})},L={key:0,class:"model-container"};var E={id:"3d-model-panel",name:"3D Model Viewer",icon:"box",description:"3D Model Viewer Panel",component:A(B,[["render",function(e,t,a,l,d,f){const m=n("model-viewer");return a.file_id?(o(),i("div",L,[r(m,u(s(l.viewerAttrs)),null,16)])):c("v-if",!0)}],["__scopeId","data-v-6a1c950e"],["__file","panel.vue"]]),options:[{field:"file_id",name:"Model File",meta:{interface:"fake-file"}},{field:"camera_controls",name:"Camera Controls",schema:{default_value:!0},meta:{interface:"boolean",options:{label:"$t:enable_select_button"},width:"half"}},{field:"auto_rotate",name:"Auto Rotate",schema:{default_value:!0},meta:{interface:"boolean",options:{label:"$t:enable_select_button"},width:"half"}},{field:"shadow_intensity",name:"Shadow Intensity",type:"integer",schema:{default_value:1},meta:{interface:"input",width:"half"}},{field:"scale",name:"Scale",type:"string",schema:{default_value:"1 1 1"},meta:{interface:"input",width:"half"}},{field:"custom",name:"Custom Properties",type:"json",schema:{default_value:"{}"},meta:{interface:"input-code"}}],minWidth:8,minHeight:8};j("\n.extension[data-v-8018fc4f] {\n\tcolor: var(--primary);\n\tfont-weight: 600;\n\tfont-size: 11px;\n\ttext-transform: uppercase;\n}\n.deselect[data-v-8018fc4f]:hover {\n\t--v-icon-color: var(--danger);\n}\n",{});const F={class:"file"};const N=[U,{id:"fake-file",name:"Fake File",description:"Select or upload a file",icon:"note_add",component:A({__name:"interface",props:{value:Object,disabled:{type:Boolean,required:!1},folder:{type:String,required:!1}},emits:["input"],setup(u,{emit:s}){const m=u,C=e(),S=t(null),$=t(null);a((()=>m.value),O),O(m.value);const{url:x,isValidURL:I,loading:j,importFromURL:A}=function(){const e=t(""),a=t(!1),n=l((()=>{try{return new URL(e.value),!0}catch{return!1}}));return{url:e,loading:a,isValidURL:n,importFromURL:async function(){a.value=!0;try{const t=await C.post("/files/import",{url:e.value,data:{folder:m.folder}});S.value=t.data.data,$.value=null,e.value="",U(S.value?.id)}catch(e){}finally{a.value=!1}}}}();function O(e){e&&R(e).then((e=>{S.value=e}))}async function R(e){if(!e)return null;return(await C.get("/files/"+e,{params:{fields:["id","title","type","filename_download"]}})).data.data}async function U(e){s("input",e),e!==S.value?.id&&(S.value=await R(e))}function V(e){e[0]&&U(e[0])}function D(e){S.value=e,$.value=null,U(e.id)}return(e,t)=>{const a=n("v-skeleton-loader"),l=n("v-icon"),s=n("v-input"),m=n("v-list-item-icon"),C=n("v-list-item-content"),O=n("v-list-item"),R=n("v-divider"),M=n("v-list"),B=n("v-menu"),L=n("v-card-title"),E=n("v-upload"),N=n("v-card-text"),P=n("v-button"),T=n("v-card-actions"),q=n("v-card"),z=n("v-dialog"),H=n("drawer-files"),W=p("tooltip");return o(),i("div",F,[r(B,{attached:"",disabled:e.loading},{activator:v((({toggle:n,active:r})=>[_("div",null,[e.loading?(o(),f(a,{key:0,type:"input"})):(o(),f(s,{key:1,clickable:"",readonly:"",active:r,disabled:u.disabled,placeholder:"No file selected","model-value":S.value&&S.value.title,onClick:n},{append:v((()=>[S.value?(o(),i(d,{key:0},[u.disabled?c("v-if",!0):h((o(),f(l,{key:0,class:"deselect",name:"close",onClick:t[0]||(t[0]=y((e=>U(null)),["stop"]))},null,512)),[[W,"Deselect"]])],64)):(o(),f(l,{key:1,name:"attach_file"}))])),_:2},1032,["active","disabled","model-value","onClick"]))])])),default:v((()=>[r(M,null,{default:v((()=>[S.value?(o(),i(d,{key:0},[r(O,{clickable:"",download:S.value.filename_download},{default:v((()=>[r(m,null,{default:v((()=>[r(l,{name:"get_app"})])),_:1}),r(C,null,{default:v((()=>[b("Download file")])),_:1})])),_:1},8,["download"]),u.disabled?c("v-if",!0):(o(),f(R,{key:0}))],64)):c("v-if",!0),u.disabled?c("v-if",!0):(o(),i(d,{key:1},[r(O,{clickable:"",onClick:t[1]||(t[1]=e=>$.value="upload")},{default:v((()=>[r(m,null,{default:v((()=>[r(l,{name:"phonelink"})])),_:1}),r(C,null,{default:v((()=>[b(w(S.value?"Replace from device":"Upload from device"),1)])),_:1})])),_:1}),r(O,{clickable:"",onClick:t[2]||(t[2]=e=>$.value="choose")},{default:v((()=>[r(m,null,{default:v((()=>[r(l,{name:"folder_open"})])),_:1}),r(C,null,{default:v((()=>[b(w(S.value?"Replace from library":"Choose from library"),1)])),_:1})])),_:1}),r(O,{clickable:"",onClick:t[3]||(t[3]=e=>$.value="url")},{default:v((()=>[r(m,null,{default:v((()=>[r(l,{name:"link"})])),_:1}),r(C,null,{default:v((()=>[b(w(S.value?"Replace from url":"Import from url"),1)])),_:1})])),_:1})],64))])),_:1})])),_:1},8,["disabled"]),r(z,{"model-value":"upload"===$.value,onEsc:t[5]||(t[5]=e=>$.value=null),"onUpdate:modelValue":t[6]||(t[6]=e=>$.value=null)},{default:v((()=>[r(q,null,{default:v((()=>[r(L,null,{default:v((()=>[b(w("Upload from device"))])),_:1}),r(N,null,{default:v((()=>[r(E,{"from-url":"",folder:u.folder,onInput:D},null,8,["folder"])])),_:1}),r(T,null,{default:v((()=>[r(P,{secondary:"",onClick:t[4]||(t[4]=e=>$.value=null)},{default:v((()=>[b(w("Cancel"))])),_:1})])),_:1})])),_:1})])),_:1},8,["model-value"]),"choose"===$.value?(o(),f(H,{key:0,folder:u.folder,active:"choose"===$.value,"onUpdate:active":t[7]||(t[7]=e=>$.value=null),onInput:V},null,8,["folder","active"])):c("v-if",!0),r(z,{"model-value":"url"===$.value,persistent:g(j),"onUpdate:modelValue":t[10]||(t[10]=e=>$.value=null),onEsc:t[11]||(t[11]=e=>$.value=null)},{default:v((()=>[r(q,null,{default:v((()=>[r(L,null,{default:v((()=>[b(w("Import from URL"))])),_:1}),r(N,null,{default:v((()=>[r(s,{modelValue:g(x),"onUpdate:modelValue":t[8]||(t[8]=e=>k(x)?x.value=e:null),autofocus:"",placeholder:"URL",nullable:!1,disabled:g(j)},null,8,["modelValue","disabled"])])),_:1}),r(T,null,{default:v((()=>[r(P,{disabled:g(j),secondary:"",onClick:t[9]||(t[9]=e=>$.value=null)},{default:v((()=>[b(w("Cancel"))])),_:1},8,["disabled"]),r(P,{loading:g(j),disabled:!1===g(I),onClick:g(A)},{default:v((()=>[b(w("Import label"))])),_:1},8,["loading","disabled","onClick"])])),_:1})])),_:1})])),_:1},8,["model-value","persistent"])])}}},[["__scopeId","data-v-8018fc4f"],["__file","interface.vue"]]),types:["uuid"],options:[{field:"folder",name:"$t:interfaces.system-folder.folder",type:"uuid",meta:{width:"full",interface:"system-folder",note:"$t:interfaces.system-folder.field_hint"}}]}],P=[M],T=[],q=[],z=[E],H=[];export{P as displays,N as interfaces,T as layouts,q as modules,H as operations,z as panels};
